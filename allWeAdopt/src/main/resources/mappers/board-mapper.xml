<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="boardMapper">
	
	<resultMap type="board" id="board_rm">
		<id property="boardNo" column="BOARD_NO"/>
		<result property="boardTitle" column="BOARD_TITLE"/>
		<result property="boardContent" column="BOARD_CONTENT"/>
		<result property="category" column="CATEGORY"/>
		<result property="boardPeriod" column="BOARD_PERIOD"/>
		<result property="phone" column="PHONE"/>
		<result property="memberNo" column="MEMBER_NO"/>
	</resultMap>
	
	<resultMap type="animal" id="animal_rm">
		<id property="boardNo" column="BOARD_NO"/>
		<result property="animalType" column="ANIMAL_TYPE"/>
		<result property="animalDetail" column="ANIMAL_DETAIL"/>
		<result property="gender" column="GENDER"/>
		<result property="neutering" column="NEUTERING"/>
	</resultMap>
	
	<resultMap type="area" id="area_rm">
		<id property="boardNo" column="BOARD_NO"/>
		<result property="area" column="AREA"/>
		<result property="areaDetail" column="AREA_DETAIL"/>
	</resultMap>
	
	<insert id="userBoardRegist">
		INSERT INTO BOARD
		VALUES(SEQ_BOARD_NO.NEXTVAL, #{boardTitle}, #{boardContent}, SYSDATE, NULL, #{category}, 'N', 
		TO_DATE(#{boardPeriod},'YYYY-MM-DD'),#{phone},2,#{memberNo},TO_DATE(#{boardPeriod2},'YYYY-MM-DD'))
	</insert>
	
	<select id="getBoardNo" resultType="_int">
		SELECT BOARD_NO FROM (SELECT BOARD_NO, ROWNUM AA FROM (
	    SELECT ROWNUM RNUM, BOARD_NO FROM BOARD
	    WHERE BOARD_ST = 'N'
	    AND BOARD_CD = 2
	    ORDER BY BOARD_NO DESC
		))WHERE AA = 1
	</select>
	
	<insert id="userBoardArea">
		INSERT INTO BOARD_AREA VALUES(#{boardNo},#{area},#{areaDetail})
	</insert>
	
	<insert id="userBoardAnimal">
		INSERT INTO BOARD_ANIMAL VALUES(#{boardNo},#{animalType},#{animalDetail},#{gender},#{neutering})
	</insert>
</mapper>
